---
import Evento1 from "../../../images/index/evento1.webp";
import Evento2 from "../../../images/index/evento2.webp";
import Evento3 from "../../../images/index/evento3.webp";
import Evento4 from "../../../images/index/evento4.webp";
import Evento5 from "../../../images/index/evento1.webp"; // repetidas para simular
import Evento6 from "../../../images/index/evento2.webp";
import Evento7 from "../../../images/index/evento3.webp";
import Evento8 from "../../../images/index/evento4.webp";
import Evento9 from "../../../images/index/evento1.webp";
import Evento10 from "../../../images/index/evento2.webp";
import Evento11 from "../../../images/index/evento3.webp";
import Evento12 from "../../../images/index/evento4.webp";

const eventos = [
  Evento1.src, Evento2.src, Evento3.src, Evento4.src,
  Evento5.src, Evento6.src, Evento7.src, Evento8.src,
  Evento9.src, Evento10.src, Evento11.src, Evento12.src
];

const imagenesPorVista = 4;
const totalPaginas = Math.ceil(eventos.length / imagenesPorVista);
---

<div class="max-w-6xl mx-auto px-4 py-12">
  <h2 class="text-center text-3xl font-bold text-[#2c9b9b] mb-8 border-b-2 pb-2 border-[#2c9b9b] inline-block">
    Nuestros eventos más recientes
  </h2>

  <!-- Carrusel -->
  <div class="relative w-full overflow-hidden">
    <div id="slider" class="flex transition-transform duration-500 ease-in-out" style="width: calc(100% * {totalPaginas});">
      {
   eventos.map((src: string, i: number) => (
  <div class="w-1/2 sm:w-1/3 md:w-1/4 p-2 shrink-0">
    <img 
      src={src} 
      alt={`Evento ${i + 1}`} 
      class="w-full h-48 object-cover rounded-xl shadow-md"
    />
  </div>
))
}

    </div>

    <!-- Botón Izquierda -->
    <button 
      onclick="moverSlide(-1)" 
      class="absolute top-1/2 left-0 transform -translate-y-1/2 bg-white text-[#2c9b9b] p-2 rounded-full shadow-md hover:scale-110 transition z-10"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <!-- Botón Derecha -->
    <button 
      onclick="moverSlide(1)" 
      class="absolute top-1/2 right-0 transform -translate-y-1/2 bg-white text-[#2c9b9b] p-2 rounded-full shadow-md hover:scale-110 transition z-10"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>

  <!-- Indicadores -->
  <div class="flex justify-center mt-6 space-x-2">
    {
      Array.from({ length: totalPaginas }).map((_, i) => (
        <span 
          class="indicador w-3 h-3 rounded-full bg-[#c4e7e7] transition-colors duration-300 cursor-pointer"
          data-indice={i}
        ></span>
      ))
    }
  </div>
</div>

<!-- Script del Carrusel -->
<script type="text/javascript" is:inline>
  let paginaActual = 0;
  const slider = document.getElementById("slider");
  const indicadores = document.querySelectorAll(".indicador");

  function actualizarCarrusel() {
    const slideWidth = slider.clientWidth;
    const desplazamiento = paginaActual * slideWidth;
    slider.style.transform = `translateX(-${desplazamiento}px)`;

    indicadores.forEach((dot, i) => {
      dot.classList.toggle("bg-[#2c9b9b]", i === paginaActual);
      dot.classList.toggle("bg-[#c4e7e7]", i !== paginaActual);
    });
  }

  function moverSlide(direccion) {
    const totalPaginas = indicadores.length;
    paginaActual += direccion;
    if (paginaActual < 0) paginaActual = totalPaginas - 1;
    if (paginaActual >= totalPaginas) paginaActual = 0;
    actualizarCarrusel();
  }

  window.addEventListener("load", () => {
    actualizarCarrusel();
    indicadores.forEach((dot, i) => {
      dot.addEventListener("click", () => {
        paginaActual = i;
        actualizarCarrusel();
      });
    });
  });
</script>
